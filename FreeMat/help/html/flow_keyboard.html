<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<HTML>
<HEAD>
<TITLE>KEYBOARD Initiate Interactive Debug Session
</TITLE>
</HEAD>
<BODY>
<H2>KEYBOARD Initiate Interactive Debug Session
</H2>
<P>
Section: <A HREF=sec_flow.html> Flow Control </A>
<H3>Usage</H3>
The <code>keyboard</code> statement is used to initiate an
interactive session at a specific point in a function.
The general syntax for the <code>keyboard</code> statement is
<PRE>
   keyboard
</PRE>
<P>
A <code>keyboard</code> statement can be issued in a <code>script</code>,
in a <code>function</code>, or from within another <code>keyboard</code> session.
The result of a <code>keyboard</code> statement is that execution
of the program is halted, and you are given a prompt
of the form:
<PRE>
 [scope,n] --&gt;
</PRE>
<P>
where <code>scope</code> is the current scope of execution (either
the name of the function we are executing, or <code>base</code> otherwise).
And <code>n</code> is the depth of the <code>keyboard</code> session. If, for example,
we are in a <code>keyboard</code> session, and we call a function that issues
another <code>keyboard</code> session, the depth of that second session
will be one higher.  Put another way, <code>n</code> is the number of <code>return</code>
statements you have to issue to get back to the base workspace.
Incidentally, a <code>return</code> is how you exit the <code>keyboard</code> session
and resume execution of the program from where it left off.  A
<code>retall</code> can be used to shortcut execution and return to the base
workspace.
<P>
The <code>keyboard</code> statement is an excellent tool for debugging
FreeMat code, and along with <code>eval</code> provide a unique set of
capabilities not usually found in compiled environments.  Indeed,
the <code>keyboard</code> statement is equivalent to a debugger breakpoint in
more traditional environments, but with significantly more inspection
power.
<H3>Example</H3>
Here we demonstrate a two-level <code>keyboard</code> situation.  We have
a simple function that calls <code>keyboard</code> internally:
<P>
<PRE>
     key_one.m
function c = key_one(a,b)
c = a + b;
keyboard

</PRE>
<P>
Now, we execute the function from the base workspace, and
at the <code>keyboard</code> prompt, we call it again.  This action
puts us at depth 2.  We can confirm that we are in the second
invocation of the function by examining the arguments.  We
then issue two <code>return</code> statements to return to the base
workspace.
<PRE>
--&gt; key_one(1,2)
[key_one,3]--&gt; key_one(5,7)
[key_one,3]--&gt; a

ans = 
 5 

[key_one,3]--&gt; b

ans = 
 7 

[key_one,3]--&gt; c

ans = 
 12 

[key_one,3]--&gt; return

ans = 
 12 

[key_one,3]--&gt; a

ans = 
 1 

[key_one,3]--&gt; b

ans = 
 2 

[key_one,3]--&gt; c

ans = 
 3 

[key_one,3]--&gt; return

ans = 
 3 
</PRE>
</BODY>
</HTML>
