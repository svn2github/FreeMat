<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<HTML>
<HEAD>
<TITLE>TRY-CATCH Try and Catch Statement
</TITLE>
</HEAD>
<BODY>
<H2>TRY-CATCH Try and Catch Statement
</H2>
<P>
Section: <A HREF=sec_flow.html> Flow Control </A>
<H3>Usage</H3>
The <code>try</code> and <code>catch</code> statements are used for error handling
and control.  A concept present in <code>C++</code>, the <code>try</code> and <code>catch</code>
statements are used with two statement blocks as follows
<PRE>
   try
     statements_1
   catch
     statements_2
   end
</PRE>
<P>
The meaning of this construction is: try to execute <code>statements_1</code>,
and if any errors occur during the execution, then execute the
code in <code>statements_2</code>.  An error can either be a FreeMat generated
error (such as a syntax error in the use of a built in function), or
an error raised with the <code>error</code> command.
<H3>Examples</H3>
Here is an example of a function that uses error control via <code>try</code>
and <code>catch</code> to check for failures in <code>fopen</code>.
<P>
<PRE>
     read_file.m
function c = read_file(filename)
try
   fp = fopen(filename,'r');
   c = fgetline(fp);
   fclose(fp);
catch
   c = ['could not open file because of error :' lasterr]
end

</PRE>
<P>
Now we try it on an example file - first one that does not exist,
and then on one that we create (so that we know it exists).
<PRE>
--&gt; read_file('this_filename_is_invalid')

c = 
could not open file because of error :Access mode r requires file to exist 

ans = 
could not open file because of error :Access mode r requires file to exist 
--&gt; fp = fopen('test_text.txt','w');
--&gt; fprintf(fp,'a line of text\n');
--&gt; fclose(fp);
--&gt; read_file('test_text.txt')

ans = 
a line of text
</PRE>
<P>
</BODY>
</HTML>
