<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<HTML>
<HEAD>
<TITLE>COLORMAP Image Colormap Function
</TITLE>
</HEAD>
<BODY>
<H2>COLORMAP Image Colormap Function
</H2>
<P>
Section: <A HREF=sec_handle.html> Handle-Based Graphics </A>
<H3>Usage</H3>
Changes the colormap for the current figure.  The generic syntax 
for its use is
<PRE>
  colormap(map)
</PRE>
<P>
where <code>map</code> is a an array organized as <code>3 \times N</code>),
which defines the RGB (Red Green Blue) coordinates for each color in the
colormap.  You can also use the function with no arguments to recover
the current colormap
<PRE>
  map = colormap
</PRE>
<P>
<H3>Function Internals</H3>
Assuming that the contents of the colormap function argument <code>c</code> are 
labeled as:
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap_eqn1.png">
</DIV>
<P>
then these columns for the RGB coordinates of pixel in the mapped image.
Assume that the image occupies the range $[a,b]$.  Then the RGB color 
of each pixel depends on the value $x$ via the following integer
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap_eqn2.png">
</DIV>
<P>
so that a pixel corresponding to image value $x$ will receive RGB color 
$[r_k,g_k,b_k]$.
Colormaps are generally used to pseudo color images to enhance 
visibility of features, etc.
<H3>Examples</H3>
We start by creating a smoothly varying image of a 2D Gaussian pulse.
<PRE>
--&gt; x = linspace(-1,1,512)'*ones(1,512);
--&gt; y = x';
--&gt; Z = exp(-(x.^2+y.^2)/0.3);
--&gt; image(Z);
</PRE>
<P>
which we display with the default (grayscale) colormap here.
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap1.png">
</DIV>
<P>

Next we switch to the <code>copper</code> colormap, and redisplay the image.
<PRE>
--&gt; colormap(copper);
--&gt; image(Z);
</PRE>
<P>
which results in the following image.
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap2.png">
</DIV>
<P>

If we capture the output of the <code>copper</code> command and plot it, we obtain
the following result:
<PRE>
--&gt; a = copper;
--&gt; plot(a);
</PRE>
<P>
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap3.png">
</DIV>
<P>

Note that in the output that each of the color components are linear functions
of the index, with the ratio between the red, blue and green components remaining
constant as a function of index.  The result is an intensity map with a copper
tint.  We can similarly construct a colormap of our own by defining the 
three components seperately.  For example, suppose we take three gaussian
curves, one for each color, centered on different parts of the index space:
<PRE>
--&gt; t = linspace(0,1,256);
--&gt; A = [exp(-(t-1.0).^2/0.1);exp(-(t-0.5).^2/0.1);exp(-t.^2/0.1)]';
--&gt; plot(A);
</PRE>
<P>
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap4.png">
</DIV>
<P>

The resulting image has dark bands in it near the color transitions.
<PRE>
--&gt; image(Z);
--&gt; colormap(A);
</PRE>
<P>
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap5.png">
</DIV>
<P>

These dark bands are a result of the nonuniform color intensity, which 
we can correct for by renormalizing each color to have the same norm.
<PRE>
--&gt; w = sqrt(sum(A'.^2));
--&gt; sA = diag(1./w)*A;
--&gt; plot(A);
</PRE>
<P>
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap6.png">
</DIV>
<P>

The resulting image has no more dark bands.
<PRE>
--&gt; image(Z);
--&gt; colormap(A);
</PRE>
<P>
<P>
<DIV ALIGN="CENTER">
<IMG SRC="colormap7.png">
</DIV>
<P>
</BODY>
</HTML>
