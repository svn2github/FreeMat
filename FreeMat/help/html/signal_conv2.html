<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<HTML>
<HEAD>
<TITLE>CONV2 Matrix Convolution
</TITLE>
</HEAD>
<BODY>
<H2>CONV2 Matrix Convolution
</H2>
<P>
Section: <A HREF=sec_signal.html> Signal Processing Functions </A>
<H3>Usage</H3>
The <code>conv2</code> function performs a two-dimensional convolution of
matrix arguments.  The syntax for its use is
<PRE>
    Z = conv2(X,Y)
</PRE>
<P>
which performs the full 2-D convolution of <code>X</code> and <code>Y</code>.  If the 
input matrices are of size <code>[xm,xn]</code> and <code>[ym,yn]</code> respectively,
then the output is of size <code>[xm+ym-1,xn+yn-1]</code>.  Another form is
<PRE>
    Z = conv2(hcol,hrow,X)
</PRE>
<P>
where <code>hcol</code> and <code>hrow</code> are vectors.  In this form, <code>conv2</code>
first convolves <code>Y</code> along the columns with <code>hcol</code>, and then 
convolves <code>Y</code> along the rows with <code>hrow</code>.  This is equivalent
to <code>conv2(hcol(:)*hrow(:)',Y)</code>.

You can also provide an optional <code>shape</code> argument to <code>conv2</code>
via either
<PRE>
    Z = conv2(X,Y,'shape')
    Z = conv2(hcol,hrow,X,'shape')
</PRE>
<P>
where <code>shape</code> is one of the following strings
<UL>
<LI>  <code>'full'</code> - compute the full convolution result - this is the default if no <code>shape</code> argument is provided.
 </LI>
<LI>  <code>'same'</code> - returns the central part of the result that is the same size as <code>X</code>.
 </LI>
<LI>  <code>'valid'</code> - returns the portion of the convolution that is computed without the zero-padded edges.  In this situation, <code>Z</code> has 
size <code>[xm-ym+1,xn-yn+1]</code> when <code>xm&gt;=ym</code> and <code>xn&gt;=yn</code>.  Otherwise
<code>conv2</code> returns an empty matrix.
 </LI>
</UL>
<H3>Function Internals</H3>
The convolution is computed explicitly using the definition:
<P>
<DIV ALIGN="CENTER">
<IMG SRC="conv2_eqn1.png">
</DIV>
<P>
If the full output is requested, then <code>m</code> ranges over <code>0 &lt;= m &lt; xm+ym-1</code>
and <code>n</code> ranges over <code>0 &lt;= n &lt; xn+yn-1</code>.  For the case where <code>shape</code>
is <code>'same'</code>, the output ranges over <code>(ym-1)/2 &lt;= m &lt; xm + (ym-1)/2</code>
and <code>(yn-1)/2 &lt;= n &lt; xn + (yn-1)/2</code>.
</BODY>
</HTML>
