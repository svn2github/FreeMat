OK - I've decided... Here's the route:

win32 - native
X/Linux/macOSX - xlib

In xlib, I need to learn how to draw plots, etc. and images...

There are two aspects to plot drawing:
Line colors,
Line styles,
Text (rotated and non-rotated)

Image/Volume display is simpler:
Image display
Window sizing

The editor class is more complicated still - it requires text output, and a 
scroll bar (which has to be implemented...).

Because of the common functionality, I suggest an abstract device context class
or graphics context class (gc), that provides the interface into the graphics
system.  Apart from the event system, (which I will have to think about) this
will.  I also want to eliminate the threads...

Another possibility is to bypass the line drawing stuff and go straight to 
bitmaps.  That uses even less code in common with the OSs.  We just have to
be able to display images.  This will be slower on X windows, though.  But
is speed super critical??  And for complex plots its slower!!  It takes
longer to send the bijillion line commands than the pixelated image.
Food for thought...

'Nother thing to think about.  gtk2 is something that can be daunting.  Suppose
I abandon FreeMatGUI (again).  That brings us down to a much simpler windowing
subsystem... provided that I can port libtecla to Win32.  Not too difficult,
given the work I've already done.  Then I don't need the file chooser, etc.
So here's a Pro/Con list:

xlib - pros
  * speed - super fast, lightweight and clean
  * simplicity - no external library dependancies
  * portability - everything except win32
xlib - cons
  * help - no helpwindow facility (can we use an embeddable browser?)
  * dialogs - no basic dialogs (don't need them...)
  * visuals!

gtk - pros
  * builtins - have full api capability
  * portability - everythink except win32
gtk - cons
  * speed - slow!
  * complexity - there is a _lot_ of code

These are the only two choices remaining.  Another idea is to port to gtk2, use
the gtk2-win32 to get Windows, and port libtecla to win32.  This would work
nicely!!!

It looks like GDK is a very thin wrapper around xlib.  Another option is to program in gdk.

What is the minimal application to prove all aspects of FreeMat from a GUI perspective:

1. command line interaction
2. lines & text (drawing to a bitmap is nice too)
3. images (grayscale, colormapped and RGB)
4. Mouse events for feedback

Suppose I were to just try and get FreeMat working (ignore FreeMatGUI for now).
The window class would need the following events:

class Point2D {
public:
  int x;
  int y;
  Point2D();
  Point2D(int xarg, int yarg);
};

class Rect2D {
public:
  int x1;
  int y1;
  int width;
  int height;
  Rect2D();
  Rect2D(int x1, int y1, int width, int height);
};

class GraphContext {
   Point2D GetTextExtent(string label);
   void DrawText(string label, Point2D pos);
   void DrawRotatedText(string label, Point2D pos, float rotationAngle);
   void SetColor(string colorName);
   void SetLineStyle(lineStyle style);
   void DrawLine(Point2D pos1, Point2D pos2);
   void DrawPoint(Point2D pos);
   void DrawCircle(Point2D pos, int radius);
   void DrawRectangle(Rect2D rect);
   void DrawLines(vector<Point2D> pts);
   void SetClippingRegion(Rect2D rect);
   void ClearClippingRegion();
   void SetCursor(CursorType);
   void BlitColormapImage(Point2D pos, ColormapImage img);
   void BlitRGBImage(Point2D pos, RGBImage img);
} 

class ColormapImage {
}

class RGBImage {
}

class Window {
   Point2D GetClientSize();
   Point2D OnMouseLeftDown();
   void OnClose();
   void OnPaint(GraphContext GC);
}

Now, most core libs don't support drawing to bitmaps...  So if I move this
functionality into my lib, I can add antialiasing (for free).  That also means
I have to use RGB images only, as colormaps don't work well with antialiased
lines.  This will be really neat.  I can develop the entire drawing library
independant of FreeMat, and then build a little windowing system into it.

This is now the critical question.  If I can draw to a bitmap using fltk,
I will consider just porting the code to fltk
.  If I cannot draw to a bitmap
using fltk, then I will consider the custom drawing route (which is almost
working).  OK - critical question solved.  So its onward with the 
draw-it-myself approach.  That leaves only one serious question: fonts.

I think that using libt1 (or whatever its called) is the better option -
although consider that on linux, FreeType is widely available, its interface
is easy to use, and that there is code parse_afm that can be used to read
the afm files for postscript output.  But FreeType doesn't do type1 fonts.
Arghhh....   Anyway, for now, I'll focus on the line drawing that doesn't 
work right yet.

Dummy-stupid.  The answer is to pre-discretize the fonts and not have any 
font library dependance at all...  Simple solution.  Which prog to use
for the fonts?  small fonts render best with TrueType... So I'll use a TTF
rendering of the fonts...  
