all: lib

CC = gcc
CFLAGS += -Ikernel -I. -Idft -Irdft -Ireodft -Idft/codelets -Irdft/codelets

SRC = api\apiplan.c \
api\configure.c \
api\execute-dft-c2r.c \
api\execute-dft-r2c.c \
api\execute-dft.c \
api\execute-r2r.c \
api\execute-split-dft-c2r.c \
api\execute-split-dft-r2c.c \
api\execute-split-dft.c \
api\execute.c \
api\export-wisdom-to-file.c \
api\export-wisdom-to-string.c \
api\export-wisdom.c \
api\extract-reim.c \
api\f77api.c \
api\flops.c \
api\forget-wisdom.c \
api\import-system-wisdom.c \
api\import-wisdom-from-file.c \
api\import-wisdom-from-string.c \
api\import-wisdom.c \
api\map-r2r-kind.c \
api\mapflags.c \
api\mkprinter-file.c \
api\mktensor-iodims.c \
api\mktensor-rowmajor.c \
api\plan-dft-1d.c \
api\plan-dft-2d.c \
api\plan-dft-3d.c \
api\plan-dft-c2r-1d.c \
api\plan-dft-c2r-2d.c \
api\plan-dft-c2r-3d.c \
api\plan-dft-c2r.c \
api\plan-dft-r2c-1d.c \
api\plan-dft-r2c-2d.c \
api\plan-dft-r2c-3d.c \
api\plan-dft-r2c.c \
api\plan-dft.c \
api\plan-guru-dft-c2r.c \
api\plan-guru-dft-r2c.c \
api\plan-guru-dft.c \
api\plan-guru-r2r.c \
api\plan-guru-split-dft-c2r.c \
api\plan-guru-split-dft-r2c.c \
api\plan-guru-split-dft.c \
api\plan-many-dft-c2r.c \
api\plan-many-dft-r2c.c \
api\plan-many-dft.c \
api\plan-many-r2r.c \
api\plan-r2r-1d.c \
api\plan-r2r-2d.c \
api\plan-r2r-3d.c \
api\plan-r2r.c \
api\print-plan.c \
api\rdft2-pad.c \
api\the-planner.c \
api\version.c \
dft\buffered.c \
dft\codelets\inplace\codlist.c \
dft\codelets\inplace\q1_2.c \
dft\codelets\inplace\q1_3.c \
dft\codelets\inplace\q1_4.c \
dft\codelets\inplace\q1_5.c \
dft\codelets\inplace\q1_6.c \
dft\codelets\inplace\q1_8.c \
dft\codelets\n.c \
dft\codelets\standard\codlist.c \
dft\codelets\standard\m1_16.c \
dft\codelets\standard\m1_32.c \
dft\codelets\standard\m1_64.c \
dft\codelets\standard\n1_10.c \
dft\codelets\standard\n1_11.c \
dft\codelets\standard\n1_12.c \
dft\codelets\standard\n1_13.c \
dft\codelets\standard\n1_14.c \
dft\codelets\standard\n1_15.c \
dft\codelets\standard\n1_16.c \
dft\codelets\standard\n1_2.c \
dft\codelets\standard\n1_3.c \
dft\codelets\standard\n1_4.c \
dft\codelets\standard\n1_5.c \
dft\codelets\standard\n1_6.c \
dft\codelets\standard\n1_7.c \
dft\codelets\standard\n1_8.c \
dft\codelets\standard\n1_9.c \
dft\codelets\standard\t1_10.c \
dft\codelets\standard\t1_12.c \
dft\codelets\standard\t1_15.c \
dft\codelets\standard\t1_16.c \
dft\codelets\standard\t1_2.c \
dft\codelets\standard\t1_3.c \
dft\codelets\standard\t1_32.c \
dft\codelets\standard\t1_4.c \
dft\codelets\standard\t1_5.c \
dft\codelets\standard\t1_6.c \
dft\codelets\standard\t1_64.c \
dft\codelets\standard\t1_7.c \
dft\codelets\standard\t1_8.c \
dft\codelets\standard\t1_9.c \
dft\codelets\standard\t2_16.c \
dft\codelets\standard\t2_32.c \
dft\codelets\standard\t2_4.c \
dft\codelets\standard\t2_64.c \
dft\codelets\standard\t2_8.c \
dft\codelets\t.c \
dft\conf.c \
dft\ct-dif.c \
dft\ct-dit.c \
dft\ct-ditbuf.c \
dft\ct-ditf.c \
dft\ct.c \
dft\direct.c \
dft\generic.c \
dft\indirect.c \
dft\kdft-dif.c \
dft\kdft-difsq.c \
dft\kdft-dit.c \
dft\kdft.c \
dft\nop.c \
dft\plan.c \
dft\problem.c \
dft\rader-omega.c \
dft\rader.c \
dft\rank-geq2.c \
dft\rank0.c \
dft\solve.c \
dft\vrank-geq1.c \
dft\vrank2-transpose.c \
dft\vrank3-transpose.c \
dft\zero.c \
kernel\align.c \
kernel\alloc.c \
kernel\assert.c \
kernel\awake.c \
kernel\buffered.c \
kernel\ct.c \
kernel\debug.c \
kernel\hash.c \
kernel\iabs.c \
kernel\md5-1.c \
kernel\md5.c \
kernel\minmax.c \
kernel\ops.c \
kernel\pickdim.c \
kernel\plan.c \
kernel\planner.c \
kernel\primes.c \
kernel\print.c \
kernel\problem.c \
kernel\rader.c \
kernel\scan.c \
kernel\solver.c \
kernel\solvtab.c \
kernel\square.c \
kernel\stride.c \
kernel\tensor.c \
kernel\tensor1.c \
kernel\tensor2.c \
kernel\tensor4.c \
kernel\tensor5.c \
kernel\tensor7.c \
kernel\tensor8.c \
kernel\tensor9.c \
kernel\timer.c \
kernel\transpose.c \
kernel\trig.c \
kernel\trig1.c \
kernel\twiddle.c \
rdft\buffered.c \
rdft\buffered2.c \
rdft\codelets\hc2r.c \
rdft\codelets\hc2r\codlist.c \
rdft\codelets\hc2r\hb_10.c \
rdft\codelets\hc2r\hb_12.c \
rdft\codelets\hc2r\hb_15.c \
rdft\codelets\hc2r\hb_16.c \
rdft\codelets\hc2r\hb_2.c \
rdft\codelets\hc2r\hb_3.c \
rdft\codelets\hc2r\hb_32.c \
rdft\codelets\hc2r\hb_4.c \
rdft\codelets\hc2r\hb_5.c \
rdft\codelets\hc2r\hb_6.c \
rdft\codelets\hc2r\hb_64.c \
rdft\codelets\hc2r\hb_7.c \
rdft\codelets\hc2r\hb_8.c \
rdft\codelets\hc2r\hb_9.c \
rdft\codelets\hc2r\hc2rIII_10.c \
rdft\codelets\hc2r\hc2rIII_12.c \
rdft\codelets\hc2r\hc2rIII_15.c \
rdft\codelets\hc2r\hc2rIII_16.c \
rdft\codelets\hc2r\hc2rIII_2.c \
rdft\codelets\hc2r\hc2rIII_3.c \
rdft\codelets\hc2r\hc2rIII_32.c \
rdft\codelets\hc2r\hc2rIII_4.c \
rdft\codelets\hc2r\hc2rIII_5.c \
rdft\codelets\hc2r\hc2rIII_6.c \
rdft\codelets\hc2r\hc2rIII_7.c \
rdft\codelets\hc2r\hc2rIII_8.c \
rdft\codelets\hc2r\hc2rIII_9.c \
rdft\codelets\hc2r\hc2r_10.c \
rdft\codelets\hc2r\hc2r_11.c \
rdft\codelets\hc2r\hc2r_12.c \
rdft\codelets\hc2r\hc2r_13.c \
rdft\codelets\hc2r\hc2r_14.c \
rdft\codelets\hc2r\hc2r_15.c \
rdft\codelets\hc2r\hc2r_16.c \
rdft\codelets\hc2r\hc2r_3.c \
rdft\codelets\hc2r\hc2r_32.c \
rdft\codelets\hc2r\hc2r_4.c \
rdft\codelets\hc2r\hc2r_5.c \
rdft\codelets\hc2r\hc2r_6.c \
rdft\codelets\hc2r\hc2r_7.c \
rdft\codelets\hc2r\hc2r_8.c \
rdft\codelets\hc2r\hc2r_9.c \
rdft\codelets\hc2r\mhc2rIII_32.c \
rdft\codelets\hc2r\mhc2rIII_64.c \
rdft\codelets\hc2r\mhc2r_128.c \
rdft\codelets\hc2r\mhc2r_32.c \
rdft\codelets\hc2r\mhc2r_64.c \
rdft\codelets\hfb.c \
rdft\codelets\r2hc.c \
rdft\codelets\r2hc\codlist.c \
rdft\codelets\r2hc\hf2_16.c \
rdft\codelets\r2hc\hf2_32.c \
rdft\codelets\r2hc\hf2_4.c \
rdft\codelets\r2hc\hf2_64.c \
rdft\codelets\r2hc\hf2_8.c \
rdft\codelets\r2hc\hf_10.c \
rdft\codelets\r2hc\hf_12.c \
rdft\codelets\r2hc\hf_15.c \
rdft\codelets\r2hc\hf_16.c \
rdft\codelets\r2hc\hf_2.c \
rdft\codelets\r2hc\hf_3.c \
rdft\codelets\r2hc\hf_32.c \
rdft\codelets\r2hc\hf_4.c \
rdft\codelets\r2hc\hf_5.c \
rdft\codelets\r2hc\hf_6.c \
rdft\codelets\r2hc\hf_64.c \
rdft\codelets\r2hc\hf_7.c \
rdft\codelets\r2hc\hf_8.c \
rdft\codelets\r2hc\hf_9.c \
rdft\codelets\r2hc\mr2hcII_32.c \
rdft\codelets\r2hc\mr2hcII_64.c \
rdft\codelets\r2hc\mr2hc_128.c \
rdft\codelets\r2hc\mr2hc_32.c \
rdft\codelets\r2hc\mr2hc_64.c \
rdft\codelets\r2hc\r2hcII_10.c \
rdft\codelets\r2hc\r2hcII_12.c \
rdft\codelets\r2hc\r2hcII_15.c \
rdft\codelets\r2hc\r2hcII_16.c \
rdft\codelets\r2hc\r2hcII_2.c \
rdft\codelets\r2hc\r2hcII_3.c \
rdft\codelets\r2hc\r2hcII_32.c \
rdft\codelets\r2hc\r2hcII_4.c \
rdft\codelets\r2hc\r2hcII_5.c \
rdft\codelets\r2hc\r2hcII_6.c \
rdft\codelets\r2hc\r2hcII_7.c \
rdft\codelets\r2hc\r2hcII_8.c \
rdft\codelets\r2hc\r2hcII_9.c \
rdft\codelets\r2hc\r2hc_10.c \
rdft\codelets\r2hc\r2hc_11.c \
rdft\codelets\r2hc\r2hc_12.c \
rdft\codelets\r2hc\r2hc_13.c \
rdft\codelets\r2hc\r2hc_14.c \
rdft\codelets\r2hc\r2hc_15.c \
rdft\codelets\r2hc\r2hc_16.c \
rdft\codelets\r2hc\r2hc_2.c \
rdft\codelets\r2hc\r2hc_3.c \
rdft\codelets\r2hc\r2hc_32.c \
rdft\codelets\r2hc\r2hc_4.c \
rdft\codelets\r2hc\r2hc_5.c \
rdft\codelets\r2hc\r2hc_6.c \
rdft\codelets\r2hc\r2hc_7.c \
rdft\codelets\r2hc\r2hc_8.c \
rdft\codelets\r2hc\r2hc_9.c \
rdft\codelets\r2r.c \
rdft\codelets\r2r\codlist.c \
rdft\codelets\r2r\e01_8.c \
rdft\codelets\r2r\e10_8.c \
rdft\conf.c \
rdft\dft-r2hc.c \
rdft\dht-r2hc.c \
rdft\dht-rader.c \
rdft\direct.c \
rdft\direct2.c \
rdft\generic.c \
rdft\hc2hc-buf.c \
rdft\hc2hc-dif.c \
rdft\hc2hc-dit.c \
rdft\hc2hc.c \
rdft\indirect.c \
rdft\khc2hc-dif.c \
rdft\khc2hc-dit.c \
rdft\khc2r.c \
rdft\kr2hc.c \
rdft\kr2r.c \
rdft\nop.c \
rdft\nop2.c \
rdft\plan.c \
rdft\plan2.c \
rdft\problem.c \
rdft\problem2.c \
rdft\rader-hc2hc.c \
rdft\rank-geq2-rdft2.c \
rdft\rank-geq2.c \
rdft\rank0-rdft2.c \
rdft\rank0.c \
rdft\rdft-dht.c \
rdft\rdft2-inplace-strides.c \
rdft\rdft2-radix2.c \
rdft\rdft2-strides.c \
rdft\rdft2-tensor-max-index.c \
rdft\solve.c \
rdft\solve2.c \
rdft\vrank-geq1-rdft2.c \
rdft\vrank-geq1.c \
reodft\conf.c \
reodft\redft00e-r2hc-pad.c \
reodft\redft00e-r2hc.c \
reodft\reodft010e-r2hc.c \
reodft\reodft11e-r2hc-odd.c \
reodft\reodft11e-r2hc.c \
reodft\reodft11e-radix2.c \
reodft\rodft00e-r2hc-pad.c \
reodft\rodft00e-r2hc.c 

SINGLE = $(subst .c,_float.o,$(SRC))
DOUBLE = $(subst .c,_double.o,$(SRC))

%_float.o : %.c
	$(CC) -DFFTW_SINGLE $(CFLAGS) -c $< -o $@

%_double.o : %.c
	$(CC) $(CFLAGS) -c $< -o $@

lib: config.h $(DOUBLE) $(SINGLE)
	mkdir .libs
	$(AR) crs .libs\libfftw3.a $(DOUBLE)
	$(AR) crs .libs\libfftw3f.a $(SINGLE)

config.h: config.h.mingw32
	copy config.h.mingw32 config.h

clean:
	del /S *.o
	del .libs\libfftw3.a
	del .libs\libfftw3f.a
	del config.h
	rmdir .libs

