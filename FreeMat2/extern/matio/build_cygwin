#! /bin/sh
#  reconfig
#    Runs configure scripts

DEFAULT_OPTS="--prefix=$HOME/matio_v1.1.4 --exec-prefix=$HOME/matio_v1.1.4"

cd zlib
CC=gcc \
CFLAGS='-mno-cygwin -DZ_PREFIX -v -g -fPIC' \
LDFLAGS='-fexceptions' \
./configure $DEFAULT_OPTS
make;make install;make clean
cd ..

cd build-cygwin

ZLIB_OPTS="--with-zlib=$HOME/matio_v1.1.4"
DOCS_OPTS="--with-docs=no"
FORTRAN="--enable-fortran"
CC=gcc \
FC=g95 \
CFLAGS='-DZ_PREFIX -mno-cygwin' \
FCFLAGS='-mno-cygwin' \
LDFLAGS='-Wl,-s' \
../configure $DEFAULT_OPTS $ZLIB_OPTS $FORTRAN $DOCS_OPTS

if test $? = 0
then
    make
fi

if test $? = 0
then
    make install
fi

cd ..
