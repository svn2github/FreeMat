<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with jLaTeX2HTML 2002 (1.62) JA patch-1.4
patched version by:  Kenshi Muto, Debian Project.
LaTeX2HTML 2002 (1.62),
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>COLORMAP Image Colormap Function</TITLE>
<META NAME="description" CONTENT="COLORMAP Image Colormap Function">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="jLaTeX2HTML v2002 JA patch-1.4">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="main.css">

<LINK REL="next" HREF="node156.html">
<LINK REL="previous" HREF="node154.html">
<LINK REL="up" HREF="node153.html">
<LINK REL="next" HREF="node156.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3751"
  HREF="node156.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3747"
  HREF="node153.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3741"
  HREF="node154.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3749"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3752"
  HREF="node156.html">CLOSEIMAGE Close Image Window</A>
<B> Up:</B> <A NAME="tex2html3748"
  HREF="node153.html">Image Display Functions</A>
<B> Previous:</B> <A NAME="tex2html3742"
  HREF="node154.html">IMAGE Image Display Function</A>
 &nbsp <B>  <A NAME="tex2html3750"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html3753"
  HREF="node155.html#SECTION00412100000000000000">Usage</A>
<LI><A NAME="tex2html3754"
  HREF="node155.html#SECTION00412200000000000000">Function Internals</A>
<LI><A NAME="tex2html3755"
  HREF="node155.html#SECTION00412300000000000000">Examples</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION00412000000000000000">
COLORMAP Image Colormap Function</A>
</H2>

<P>

<H3><A NAME="SECTION00412100000000000000">
Usage</A>
</H3>

<P>
Changes the colormap used for the display of the indexed (scalar) images in
the currently active image window.  The generic syntax for its use is
<PRE>
  colormap(map)
</PRE>
where <code>map</code> is a 768 element array (usually organized as <code>3 \times 256</code>),
which defines the RGB (Red Green Blue) coordinates for each color in the
colormap.

<P>

<H3><A NAME="SECTION00412200000000000000">
Function Internals</A>
</H3>

<P>
Assuming that the contents of the colormap function argument <code>c</code> are 
labeled as:
<!-- MATH
 \begin{displaymath}
c = \begin{bmatrix}
    r_1 & g_1 & b_1 \			\
    r_1 & g_2 & b_2 \			\
    r_1 & g_3 & b_3 \			\
    \vdots & \vdots & \vdots
      \end{bmatrix} 
\end{displaymath}
 -->
<P></P>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="124" HEIGHT="65" ALIGN="MIDDLE" BORDER="0"
 SRC="img97.png"
 ALT="$\displaystyle c = \begin{bmatrix}
r_1 &amp; g_1 &amp; b_1 \ \
r_1 &amp; g_2 &amp; b_2 \ \
r_1 &amp; g_3 &amp; b_3 \ \
\vdots &amp; \vdots &amp; \vdots
\end{bmatrix}
$">
</DIV><P></P>
then these columns for the RGB coordinates of pixel in the mapped image.
Assume that the image occupies the range <IMG
 WIDTH="236" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img98.png"
 ALT="$ [a,b]$">.  Then the RGB color 
of each pixel depends on the value <IMG
 WIDTH="349" HEIGHT="45" ALIGN="BOTTOM" BORDER="0"
 SRC="img99.png"
 ALT="$ x$"> via the following integer
<!-- MATH
 \begin{displaymath}
k = 1 + \lfloor 256 \frac{x-a}{b-a} \rfloor,
\end{displaymath}
 -->
<P></P>
<DIV ALIGN="CENTER">
<IMG
 WIDTH="35" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img100.png"
 ALT="$\displaystyle k = 1 + \lfloor 256 \frac{x-a}{b-a} \rfloor,
$">
</DIV><P></P>
so that a pixel corresponding to image value <IMG
 WIDTH="349" HEIGHT="45" ALIGN="BOTTOM" BORDER="0"
 SRC="img99.png"
 ALT="$ x$"> will receive RGB color 
<!-- MATH
 $[r_k,g_k,b_k]$
 -->
<IMG
 WIDTH="13" HEIGHT="14" ALIGN="MIDDLE" BORDER="0"
 SRC="img101.png"
 ALT="$ [r_k,g_k,b_k]$">.
Colormaps are generally used to pseudo color images to enhance 
visibility of features, etc.

<P>

<H3><A NAME="SECTION00412300000000000000">
Examples</A>
</H3>

<P>
We start by creating a smoothly varying image of a 2D Gaussian pulse.
<PRE>
--&gt; x = linspace(-1,1,512)'*ones(1,512);
--&gt; y = x';
--&gt; Z = exp(-(x.^2+y.^2)/0.3);
--&gt; image(Z);
</PRE>
which we display with the default (grayscale) colormap here.

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap1.png"
 ALT="3712">
</DIV>

<P>
Next we switch to the <code>copper</code> colormap, and redisplay the image.
<PRE>
--&gt; colormap(copper);
--&gt; image(Z);
</PRE>
which results in the following image.

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap2.png"
 ALT="3715">
</DIV>

<P>
If we capture the output of the <code>copper</code> command and plot it, we obtain
the following result:
<PRE>
--&gt; a = copper;
--&gt; plot(a);
</PRE>

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap3.png"
 ALT="3718">
</DIV>

<P>
Note that in the output that each of the color components are linear functions
of the index, with the ratio between the red, blue and green components remaining
constant as a function of index.  The result is an intensity map with a copper
tint.  We can similarly construct a colormap of our own by defining the 
three components seperately.  For example, suppose we take three gaussian
curves, one for each color, centered on different parts of the index space:
<PRE>
--&gt; t = linspace(0,1,256);
--&gt; A = [exp(-(t-1.0).^2/0.1);exp(-(t-0.5).^2/0.1);exp(-t.^2/0.1)]';
--&gt; plot(A);
</PRE>

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap4.png"
 ALT="3721">
</DIV>

<P>
The resulting image has dark bands in it near the color transitions.
<PRE>
--&gt; image(Z);
--&gt; colormap(A);
</PRE>

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap5.png"
 ALT="3724">
</DIV>

<P>
These dark bands are a result of the nonuniform color intensity, which 
we can correct for by renormalizing each color to have the same norm.
<PRE>
--&gt; w = sqrt(sum(A'.^2));
--&gt; sA = diag(1./w)*A;
--&gt; plot(A);
</PRE>

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap6.png"
 ALT="3727">
</DIV>

<P>
The resulting image has no more dark bands.
<PRE>
--&gt; image(Z);
--&gt; colormap(A);
</PRE>

<P>
<DIV ALIGN="CENTER">
<IMG
 ALIGN="BOTTOM" BORDER="0" SRC="colormap7.png"
 ALT="3730">
</DIV>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3751"
  HREF="node156.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3747"
  HREF="node153.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3741"
  HREF="node154.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3749"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3752"
  HREF="node156.html">CLOSEIMAGE Close Image Window</A>
<B> Up:</B> <A NAME="tex2html3748"
  HREF="node153.html">Image Display Functions</A>
<B> Previous:</B> <A NAME="tex2html3742"
  HREF="node154.html">IMAGE Image Display Function</A>
 &nbsp <B>  <A NAME="tex2html3750"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Samit Basu
2004-03-10
</ADDRESS>
</BODY>
</HTML>
