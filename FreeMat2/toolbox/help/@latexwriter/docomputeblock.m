function docomputeblock(&p,cmds,errorsexpected)
  